## План действий по добавлению функций кнопок

1. **Анализ текущего проекта**
   - Проверить структуру проекта (frontend, backend, точка входа).
   - Найти компонент/страницу с полем ввода URL и блоком результата.
   - Уточнить, как сейчас вызывается AI (есть ли уже API-обёртка или прямой вызов модели).

2. **Проектирование API для кнопок**
   - Определить единый HTTP‑endpoint (например, `/api/article/process`) или отдельные для каждой функции.
   - Сформировать контракт: входные данные (URL статьи, тип действия: `about`, `thesis`, `telegram_post`), выходные данные (структура ответа, коды ошибок).
   - Продумать формат сообщений об ошибках и логирование (ошибки сети, некорректный URL, ошибки AI).

3. **Реализация парсинга статьи**
   - Реализовать модуль, который по URL загружает HTML‑страницу, извлекает основной текст статьи и выполняет базовую очистку.
   - Добавить валидацию URL (формат, протокол, длина) и обработку типичных ошибок (404, timeout, пустой контент).
   - Включить логирование ключевых шагов парсинга и ошибок для последующей отладки.

4. **Интеграция с AI‑моделью**
   - Создать модуль/сервис для обращения к AI (обёртка над внешним API или локальной моделью).
   - Определить и описать промпты для трёх режимов:
     - «О чем статья?» — краткое описание/аннотация.
     - «Тезисы» — список ключевых тезисов/bullet points.
     - «Пост для Telegram» — готовый текст поста с учётом ограничений формата.
   - Добавить обработку ошибок AI‑сервиса (недоступность, лимиты, некорректный ответ) и логирование.

5. **Реализация серверных обработчиков кнопок**
   - В backend‑endpoint реализовать логику:
     - принять URL и тип действия;
     - выполнить парсинг статьи;
     - передать очищенный текст в AI‑модуль с нужным типом запроса;
     - вернуть структурированный ответ клиенту.
   - Обеспечить единый формат JSON‑ответа для всех трех кнопок (поле с типом, полем с текстом результата, полем с диагностикой/ошибками).

6. **Реализация логики кнопок на фронтенде**
   - Найти/создать компонент с тремя кнопками: «О чем статья?», «Тезисы», «Пост для Telegram».
   - Для каждой кнопки:
     - навесить обработчик клика, который отправляет запрос на backend с нужным типом действия и введённым URL;
     - добавить валидацию URL на клиенте (перед отправкой запроса) и отображение понятных сообщений об ошибках.
   - Реализовать состояние загрузки (spinner/disabled‑состояние кнопок) и обработку ошибок от сервера.

7. **Отображение результата**
   - Настроить блок результата так, чтобы он:
     - отображал текст для режима «О чем статья?»;
     - красиво выводил список тезисов (список/маркированные пункты);
     - корректно показывал текст поста для Telegram (с сохранением переносов строк).
   - Добавить базовое форматирование и, при необходимости, возможность копирования текста одним кликом.

8. **Валидация и обработка ошибок**
   - Проверить, что при некорректном URL, ошибке сети или сбое AI пользователь получает понятное сообщение, а не технический стек‑трейс.
   - Убедиться, что все ошибки логируются на сервере с достаточным контекстом, но без утечки чувствительных данных.

9. **Тестирование**
   - Написать минимальные unit‑тесты для:
     - парсинга статьи;
     - обёртки AI‑модуля;
     - backend‑endpoint c разными типами действий.
   - Протестировать вручную сценарии:
     - корректный URL и успешный ответ для каждой кнопки;
     - некорректный URL;
     - недоступность AI‑сервиса.

10. **Рефакторинг и подготовка к масштабированию**
    - Вынести общие части логики (парсинг, вызов AI, обработка ошибок) в отдельные модули/сервисы.
    - Оценить потребности в кэшировании результатов для популярных статей.
    - Обновить документацию (README/PROJECT/PLAN) с описанием API и поведения кнопок.

